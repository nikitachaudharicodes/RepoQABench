{
  "repo_name": "bokeh_bokeh",
  "issue_id": "11276",
  "issue_description": "# [BUG] FileInput filename not returning the filenames after upgrading to v2.3.2\n\nThe FileInput widget doesn't return the filename anymore after upgrading from v2.2.3 to v2.3.2\r\n\r\nMinimal example code:\r\n```\r\nfrom bokeh.models import FileInput, CustomJS\r\nfrom bokeh.io import show\r\n\r\nmyFileInput = FileInput(accept='.pdf',multiple=True)\r\n\r\nmyFileInput.js_on_change(\"value\", CustomJS(code=\"\"\"\r\n    console.log(this)\r\n    console.log(this.filename)\r\n    console.log(this.value)\r\n    console.log(this.accept)\r\n\"\"\"))\r\n\r\nshow(myFileInput)\r\n```\r\n\r\n<b>Expected behavior:</b>\r\nWhen selecting 6 pdf files, \"this.filename\" should return an array of 6 filenames in the console.\r\n\r\n<b>Observed behavior:</b>\r\n\r\n<b>v2.2.3</b>\r\nCorrectly returns an array of 6 filenames\r\n![FileInput_v2-2-3](https://user-images.githubusercontent.com/56967998/118355670-7f80a000-b571-11eb-8d59-fbbf30f7128c.JPG)\r\n\r\n<b>v2.3.2</b>\r\nIncorrectly returns an empty field\r\n![FileInput_v2-3-2](https://user-images.githubusercontent.com/56967998/118355675-87404480-b571-11eb-9ca1-25515523ad08.JPG)\r\n",
  "issue_comments": [
    {
      "id": 841707171,
      "user": "mattpap",
      "body": "This is the culprit:\r\nhttps://github.com/bokeh/bokeh/blob/404648077ba71339598936978db72b545d6f39fa/bokehjs/src/lib/models/widgets/file_input.ts#L51-L58\r\n\r\nThose assignments need to be done simultaneously, otherwise callbacks will be called as soon as the first property is updated. This code was the same in 2.2, so it must have been a fluke it worked."
    },
    {
      "id": 841778340,
      "user": "Suicoleiro",
      "body": "Thanks for the response @mattpap \r\nFor now, it works with v2.3.2 if I change ```myFileInput.js_on_change(\"value\",``` to ```myFileInput.js_on_change(\"filename\",```"
    },
    {
      "id": 893729005,
      "user": "Suicoleiro",
      "body": "> \r\n> \r\n> This is the culprit:\r\n> \r\n> https://github.com/bokeh/bokeh/blob/404648077ba71339598936978db72b545d6f39fa/bokehjs/src/lib/models/widgets/file_input.ts#L51-L58\r\n> \r\n> Those assignments need to be done simultaneously, otherwise callbacks will be called as soon as the first property is updated. This code was the same in 2.2, so it must have been a fluke it worked.\r\n\r\n@mattpap Not sure if I'm reading your response correctly nor am I experienced at all. Are you proposing something like below or is this leading to the same issue?\r\n\r\n```js\r\nif (this.model.multiple) {\r\nObject.assign(this.model, {value: values, filename: filenames, mime_type: mime_types})\r\n} else {\r\nObject.assign(this.model, {value: values[0], filename: filenames[0], mime_type: mime_types[0]})\r\n}\r\n```"
    },
    {
      "id": 893754687,
      "user": "mattpap",
      "body": "No, the above would still trigger independent assignments. This is what I meant:\r\n```ts\r\nif (this.model.multiple)\r\n  this.model.setv({value: values, filename: filenames, mime_type: mime_types})\r\nelse\r\n  this.model.setv({value: values[0], filename: filenames[0], mime_type: mime_types[0]})\r\n```\r\nHowever, I was also investigating a new approach to simultaneous assignments, that would leave the code almost unchanged, but that work still requires some thought though."
    },
    {
      "id": 896921108,
      "user": "bryevdv",
      "body": "@Suicoleiro Would you be interested to submit a PR the immediate fix above?"
    },
    {
      "id": 899257008,
      "user": "Suicoleiro",
      "body": "@bryevdv apologies for the late answer. Yes, this would be perfect to get familar with the process and will help me for future contributions. Still have to go through all bokeh developers documentation but if a few days are not critical, I'm very happy to give it a stab."
    },
    {
      "id": 899839757,
      "user": "Suicoleiro",
      "body": "@bryevdv performed following steps but need some help for the next steps:\r\n- Set up Bokeh as described in the Developers section forking 2.4 branch\r\n- Adapted the forked bokeh/bokehjs/src/lib/models/widgets/file_input.ts as suggest by @mattpap \r\n- Built/Installed using python setup.py develop --build-js\r\n- Tested before and after built using a minimal script as follows:\r\n```python\r\nfrom bokeh.models import FileInput, CustomJS, TextInput\r\nfrom bokeh.io import curdoc\r\nfrom bokeh.layouts import column\r\n\r\nmyFileNames = TextInput(value=\"\", title=\"Number of file names:\")\r\nmyFileValues = TextInput(value=\"\", title=\"Number of file values:\")\r\n\r\nmyFileInput = FileInput(accept='.pdf',multiple=True)\r\n\r\nmyFileInput.js_on_change(\"value\", CustomJS(args=dict(myFileNames=myFileNames, myFileValues=myFileValues), code=\"\"\"\r\n    // get number of file names\r\n    myFileNames.value = this.filename.length.toString();\r\n    // get number of file values\r\n    myFileValues.value = this.value.length.toString();\r\n\"\"\"))\r\n\r\ncurdoc().add_root(column(myFileInput, myFileNames, myFileValues))\r\n```\r\n\r\nBefore (v2.3.3):\r\n![FileInput_result_v2 3 3](https://user-images.githubusercontent.com/56967998/129633278-e3cb60d0-a8a6-490c-bb13-22e37cdbbbc9.JPG)\r\n\r\nAfter (v2.4dev):\r\n![FileInput_result_v2 4dev](https://user-images.githubusercontent.com/56967998/129633325-cb09f5c9-ff69-4405-8ebd-77773d3b7e1d.JPG)\r\n\r\nQuestions:\r\n- Are there additional tests required (didn't manage to create an automated test using pytest)\r\n- Can you advise on the next steps?\r\n\r\nThanks!"
    },
    {
      "id": 899851845,
      "user": "bryevdv",
      "body": "@Suicoleiro it seems like you have a working changeset with manual testing, which is great!\r\n\r\n> didn't manage to create an automated test using pytest\r\n\r\nFor this kind of change, any real tests will have to be JavaScript tests, since the actual implementation is all in BokehJS. The existing JS unit tests for `FileInput` are here:\r\n\r\nhttps://github.com/bokeh/bokeh/blob/branch-2.4/bokehjs/test/unit/models/widgets/file_input.ts\r\n\r\nAt a quick glance, it seems like it should not be too bad to copy one of those tests and update it to cover the \"multiple\" case. I would suggest opening a PR at this point, and then we can iterate on some unit tests in the PR. Thanks!"
    },
    {
      "id": 899853029,
      "user": "bryevdv",
      "body": "also cc @tcmetzger who is in the middle of updating and improving our dev docs, and may want to ask you about your experience going through them for the first time"
    },
    {
      "id": 900590893,
      "user": "Suicoleiro",
      "body": "@bryevdv Thanks, will see if I can add two test cases in the respective bokehjs folder for accepting multiple files. The existing tests will help getting familiar.\r\n\r\n@tcmetzger Until this point the documentation has been very nice and I was able to follow even as a newbie. Please let me know if you would like to talk about more detailed feedback and in which form you would want me to comment?\r\n\r\nThanks!\r\n"
    },
    {
      "id": 902126536,
      "user": "tcmetzger",
      "body": "@Suicoleiro Thank you for your work on this pull request! And thanks for your feedback on the docs. I'm collecting feedback and ideas for the developer docs update in this issue: https://github.com/bokeh/bokeh/issues/11354 - feel free to add any observations you made while working on this PR! The current updates are in this Pull Request: https://github.com/bokeh/bokeh/pull/11513"
    },
    {
      "id": 2439472471,
      "user": "github-actions[bot]",
      "body": "This issue has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs."
    }
  ],
  "text_context": "# [BUG] FileInput filename not returning the filenames after upgrading to v2.3.2\n\nThe FileInput widget doesn't return the filename anymore after upgrading from v2.2.3 to v2.3.2\r\n\r\nMinimal example code:\r\n```\r\nfrom bokeh.models import FileInput, CustomJS\r\nfrom bokeh.io import show\r\n\r\nmyFileInput = FileInput(accept='.pdf',multiple=True)\r\n\r\nmyFileInput.js_on_change(\"value\", CustomJS(code=\"\"\"\r\n    console.log(this)\r\n    console.log(this.filename)\r\n    console.log(this.value)\r\n    console.log(this.accept)\r\n\"\"\"))\r\n\r\nshow(myFileInput)\r\n```\r\n\r\n<b>Expected behavior:</b>\r\nWhen selecting 6 pdf files, \"this.filename\" should return an array of 6 filenames in the console.\r\n\r\n<b>Observed behavior:</b>\r\n\r\n<b>v2.2.3</b>\r\nCorrectly returns an array of 6 filenames\r\n![FileInput_v2-2-3](https://user-images.githubusercontent.com/56967998/118355670-7f80a000-b571-11eb-8d59-fbbf30f7128c.JPG)\r\n\r\n<b>v2.3.2</b>\r\nIncorrectly returns an empty field\r\n![FileInput_v2-3-2](https://user-images.githubusercontent.com/56967998/118355675-87404480-b571-11eb-9ca1-25515523ad08.JPG)\r\n\n\nThis is the culprit:\r\nhttps://github.com/bokeh/bokeh/blob/404648077ba71339598936978db72b545d6f39fa/bokehjs/src/lib/models/widgets/file_input.ts#L51-L58\r\n\r\nThose assignments need to be done simultaneously, otherwise callbacks will be called as soon as the first property is updated. This code was the same in 2.2, so it must have been a fluke it worked.\n\nThanks for the response @mattpap \r\nFor now, it works with v2.3.2 if I change ```myFileInput.js_on_change(\"value\",``` to ```myFileInput.js_on_change(\"filename\",```\n\n> \r\n> \r\n> This is the culprit:\r\n> \r\n> https://github.com/bokeh/bokeh/blob/404648077ba71339598936978db72b545d6f39fa/bokehjs/src/lib/models/widgets/file_input.ts#L51-L58\r\n> \r\n> Those assignments need to be done simultaneously, otherwise callbacks will be called as soon as the first property is updated. This code was the same in 2.2, so it must have been a fluke it worked.\r\n\r\n@mattpap Not sure if I'm reading your response correctly nor am I experienced at all. Are you proposing something like below or is this leading to the same issue?\r\n\r\n```js\r\nif (this.model.multiple) {\r\nObject.assign(this.model, {value: values, filename: filenames, mime_type: mime_types})\r\n} else {\r\nObject.assign(this.model, {value: values[0], filename: filenames[0], mime_type: mime_types[0]})\r\n}\r\n```\n\nNo, the above would still trigger independent assignments. This is what I meant:\r\n```ts\r\nif (this.model.multiple)\r\n  this.model.setv({value: values, filename: filenames, mime_type: mime_types})\r\nelse\r\n  this.model.setv({value: values[0], filename: filenames[0], mime_type: mime_types[0]})\r\n```\r\nHowever, I was also investigating a new approach to simultaneous assignments, that would leave the code almost unchanged, but that work still requires some thought though.\n\n@Suicoleiro Would you be interested to submit a PR the immediate fix above?\n\n@bryevdv apologies for the late answer. Yes, this would be perfect to get familar with the process and will help me for future contributions. Still have to go through all bokeh developers documentation but if a few days are not critical, I'm very happy to give it a stab.\n\n@bryevdv performed following steps but need some help for the next steps:\r\n- Set up Bokeh as described in the Developers section forking 2.4 branch\r\n- Adapted the forked bokeh/bokehjs/src/lib/models/widgets/file_input.ts as suggest by @mattpap \r\n- Built/Installed using python setup.py develop --build-js\r\n- Tested before and after built using a minimal script as follows:\r\n```python\r\nfrom bokeh.models import FileInput, CustomJS, TextInput\r\nfrom bokeh.io import curdoc\r\nfrom bokeh.layouts import column\r\n\r\nmyFileNames = TextInput(value=\"\", title=\"Number of file names:\")\r\nmyFileValues = TextInput(value=\"\", title=\"Number of file values:\")\r\n\r\nmyFileInput = FileInput(accept='.pdf',multiple=True)\r\n\r\nmyFileInput.js_on_change(\"value\", CustomJS(args=dict(myFileNames=myFileNames, myFileValues=myFileValues), code=\"\"\"\r\n    // get number of file names\r\n    myFileNames.value = this.filename.length.toString();\r\n    // get number of file values\r\n    myFileValues.value = this.value.length.toString();\r\n\"\"\"))\r\n\r\ncurdoc().add_root(column(myFileInput, myFileNames, myFileValues))\r\n```\r\n\r\nBefore (v2.3.3):\r\n![FileInput_result_v2 3 3](https://user-images.githubusercontent.com/56967998/129633278-e3cb60d0-a8a6-490c-bb13-22e37cdbbbc9.JPG)\r\n\r\nAfter (v2.4dev):\r\n![FileInput_result_v2 4dev](https://user-images.githubusercontent.com/56967998/129633325-cb09f5c9-ff69-4405-8ebd-77773d3b7e1d.JPG)\r\n\r\nQuestions:\r\n- Are there additional tests required (didn't manage to create an automated test using pytest)\r\n- Can you advise on the next steps?\r\n\r\nThanks!\n\n@Suicoleiro it seems like you have a working changeset with manual testing, which is great!\r\n\r\n> didn't manage to create an automated test using pytest\r\n\r\nFor this kind of change, any real tests will have to be JavaScript tests, since the actual implementation is all in BokehJS. The existing JS unit tests for `FileInput` are here:\r\n\r\nhttps://github.com/bokeh/bokeh/blob/branch-2.4/bokehjs/test/unit/models/widgets/file_input.ts\r\n\r\nAt a quick glance, it seems like it should not be too bad to copy one of those tests and update it to cover the \"multiple\" case. I would suggest opening a PR at this point, and then we can iterate on some unit tests in the PR. Thanks!\n\nalso cc @tcmetzger who is in the middle of updating and improving our dev docs, and may want to ask you about your experience going through them for the first time\n\n@bryevdv Thanks, will see if I can add two test cases in the respective bokehjs folder for accepting multiple files. The existing tests will help getting familiar.\r\n\r\n@tcmetzger Until this point the documentation has been very nice and I was able to follow even as a newbie. Please let me know if you would like to talk about more detailed feedback and in which form you would want me to comment?\r\n\r\nThanks!\r\n\n\n@Suicoleiro Thank you for your work on this pull request! And thanks for your feedback on the docs. I'm collecting feedback and ideas for the developer docs update in this issue: https://github.com/bokeh/bokeh/issues/11354 - feel free to add any observations you made while working on this PR! The current updates are in this Pull Request: https://github.com/bokeh/bokeh/pull/11513\n\nThis issue has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.",
  "pr_link": "https://github.com/bokeh/bokeh/pull/11513",
  "code_context": [
    {
      "filename": "_setup_support.py",
      "content": "#-----------------------------------------------------------------------------\n# Copyright (c) 2012 - 2021, Anaconda, Inc., and Bokeh Contributors.\n# All rights reserved.\n#\n# The full license is in the file LICENSE.txt, distributed with this software.\n#-----------------------------------------------------------------------------\n'''\n\n'''\n# Standard library imports\nimport os\nimport re\nimport shutil\nimport subprocess\nimport sys\nimport time\nfrom glob import glob\nfrom os.path import dirname, exists, join, realpath\n\n# provide fallbacks for highlights in case colorama is not installed\ntry:\n    import colorama\n    from colorama import Fore, Style\n\n    def bright(text): return \"%s%s%s\" % (Style.BRIGHT, text, Style.RESET_ALL)\n    def dim(text):    return \"%s%s%s\" % (Style.DIM,    text, Style.RESET_ALL)\n    def red(text):    return \"%s%s%s\" % (Fore.RED,     text, Style.RESET_ALL)\n    def green(text):  return \"%s%s%s\" % (Fore.GREEN,   text, Style.RESET_ALL)\n    def yellow(text): return \"%s%s%s\" % (Fore.YELLOW,  text, Style.RESET_ALL)\n    sys.platform == \"win32\" and colorama.init()\nexcept ImportError:\n    def bright(text):  return text\n    def dim(text):     return text\n    def red(text) :    return text\n    def green(text) :  return text\n    def yellow(text) : return text\n\n# -----------------------------------------------------------------------------\n# Module global variables\n# -----------------------------------------------------------------------------\n\nMIN_PYTHON_VERSION = (3, 7)\n\n# state our runtime deps here, also used by meta.yaml (so KEEP the spaces)\nINSTALL_REQUIRES = [\n    'Jinja2 >=2.9',\n    'numpy >=1.11.3',\n    'packaging >=16.8',\n    'pillow >=7.1.0',\n    'PyYAML >=3.10',\n    'tornado >=5.1',\n    'typing_extensions >=3.10.0',\n]\n\n# -----------------------------------------------------------------------------\n# Helpers for command line operations\n# -----------------------------------------------------------------------------\n\ndef show_bokehjs(bokehjs_action, develop=False):\n    ''' Print a useful report after setuptools output describing where and how\n    BokehJS is installed.\n\n    Args:\n        bokehjs_action (str) : one of 'built', 'installed', or 'packaged'\n            how (or if) BokehJS was installed into the python source tree\n\n        develop (bool, optional) :\n            whether the command was for \"develop\" mode (default: False)\n\n    Returns:\n        None\n\n    '''\n    print()\n    if develop:\n        print(\"Installed Bokeh for DEVELOPMENT:\")\n    else:\n        print(\"Installed Bokeh:\")\n    if bokehjs_action in ['built', 'installed']:\n        print(\"  - using %s built BokehJS from bokehjs/build\\n\" % (bright(yellow(\"NEWLY\")) if bokehjs_action=='built' else bright(yellow(\"PREVIOUSLY\"))))\n    else:\n        print(\"  - using %s BokehJS, located in 'bokeh.server.static'\\n\" % bright(yellow(\"PACKAGED\")))\n    print()\n\ndef show_help(bokehjs_action):\n    ''' Print information about extra Bokeh-specific command line options.\n\n    Args:\n        bokehjs_action (str) : one of 'built', 'installed', or 'packaged'\n            how (or if) BokehJS was installed into the python source tree\n\n    Returns:\n        None\n\n    '''\n    print()\n    if bokehjs_action in ['built', 'installed']:\n        print(\"Bokeh-specific options available with 'install' or 'develop':\")\n        print()\n        print(\"  --build-js          build and install a fresh BokehJS\")\n        print(\"  --install-js        install only last previously built BokehJS\")\n    else:\n        print(\"Bokeh is using PACKAGED BokehJS, located in 'bokeh.server.static'\")\n        print()\n        print(\"No extra Bokeh-specific options are available.\")\n    print()\n\n# -----------------------------------------------------------------------------\n# Other functions used directly by setup.py\n# -----------------------------------------------------------------------------\n\ndef build_or_install_bokehjs():\n    ''' Build a new BokehJS (and install it) or install a previously build\n    BokehJS.\n\n    If no options ``--build-js`` or ``--install-js`` are detected, the\n    user is prompted for what to do.\n\n    If ``--existing-js`` is detected, then this setup.py is being run from a\n    packaged sdist, no action is taken.\n\n    Note that ``-build-js`` is only compatible with the following ``setup.py``\n    commands: install, develop, sdist, egg_info, build\n\n    Returns:\n        str : one of 'built', 'installed', 'packaged'\n            How (or if) BokehJS was installed into the python source tree\n\n    '''\n\n    # This happens when building from inside a published, pre-packaged sdist\n    # The --existing-js option is not otherwise documented\n    if '--existing-js' in sys.argv:\n        sys.argv.remove('--existing-js')\n        return \"packaged\"\n\n    if '--build-js' not in sys.argv and '--install-js' not in sys.argv:\n        jsbuild = jsbuild_prompt()\n\n    elif '--build-js' in sys.argv:\n        jsbuild = True\n        sys.argv.remove('--build-js')\n\n    # must be \"--install-js\"\n    else:\n        jsbuild = False\n        sys.argv.remove('--install-js')\n\n    jsbuild_ok = ('install', 'develop', 'sdist', 'bdist_wheel', 'egg_info', 'build')\n    if jsbuild and not any(arg in sys.argv for arg in jsbuild_ok):\n        print(\"Error: Option '--build-js' only valid with 'install', 'develop', 'sdist', 'bdist_wheel', or 'build', exiting.\")\n        sys.exit(1)\n\n    if jsbuild:\n        build_js()\n        install_js()\n        return \"built\"\n    else:\n        install_js()\n        return \"installed\"\n\ndef conda_rendering():\n    return os.getenv(\"CONDA_BUILD_STATE\" ,\"junk\") == \"RENDER\"\n\ndef check_python():\n    if sys.version_info[:2] < MIN_PYTHON_VERSION:\n        raise RuntimeError(\"Bokeh requires Python >= \" + \".\".join(str(x) for x in MIN_PYTHON_VERSION))\n\ndef check_building_dist():\n    ''' Check for 'sdist' or `bdist_wheel` and ensure we always build or install\n    BokehJS when packaging.\n\n    Source distributions (sdists) and wheels do not ship with BokehJS source\n    code, but  must ship with a pre-built BokehJS library. This function checks\n    ``sys.argv`` to ensure that ``--build-js`` or ``--install-js` is present.\n\n    Returns:\n        None\n\n    '''\n    for dist in (\"sdist\", \"bdist_wheel\"):\n        if dist in sys.argv and (\"--install-js\" not in sys.argv and \"--build-js\" not in sys.argv):\n            print(f\"Error: Option '--build-js' or '--install-js' must be present with {dist!r}, exiting.\")\n            sys.exit(1)\n\ndef fixup_for_packaged():\n    ''' If we are installing FROM an sdist, then a pre-built BokehJS is\n    already installed in the python source tree.\n\n    The command line options ``--build-js`` or ``--install-js`` are\n    removed from ``sys.argv``, with a warning.\n\n    Also adds ``--existing-js`` to ``sys.argv`` to signal that BokehJS is\n    already packaged.\n\n    Returns:\n        None\n\n    '''\n    ROOT = dirname(realpath(__file__))\n\n    if exists(join(ROOT, 'PKG-INFO')):\n        if \"--build-js\" in sys.argv or \"--install-js\" in sys.argv:\n            print(SDIST_BUILD_WARNING)\n            if \"--build-js\" in sys.argv:\n                sys.argv.remove('--build-js')\n            if \"--install-js\" in sys.argv:\n                sys.argv.remove('--install-js')\n        if \"--existing-js\" not in sys.argv:\n            sys.argv.append('--existing-js')\n\n# -----------------------------------------------------------------------------\n# Helpers for operation in the bokehjs dir\n# -----------------------------------------------------------------------------\n\ndef jsbuild_prompt():\n    ''' Prompt users whether to build a new BokehJS or install an existing one.\n\n    Returns:\n        bool : True, if a new build is requested, False otherwise\n\n    '''\n    print(BOKEHJS_BUILD_PROMPT)\n    mapping = {\"1\": True, \"2\": False}\n    value = input(\"Choice? \")  # lgtm [py/use-of-input]\n    while value not in mapping:\n        print(\"Input '%s' not understood. Valid choices: 1, 2\\n\" % value)\n        value = input(\"Choice? \")  # lgtm [py/use-of-input]\n    return mapping[value]\n\n# -----------------------------------------------------------------------------\n# Helpers for operations in the bokehjs dir\n# -----------------------------------------------------------------------------\n\ndef build_js():\n    ''' Build BokehJS files under the ``bokehjs`` source subdirectory.\n\n    Also prints a table of statistics about the generated assets (file sizes,\n    etc.) or any error messages if the build fails.\n\n    Note this function only builds BokehJS assets, it does not install them\n    into the python source tree.\n\n    '''\n    print(\"Building BokehJS... \", end=\"\")\n    sys.stdout.flush()\n    os.chdir('bokehjs')\n\n    cmd = [\"node\", \"make\", \"build\"]\n\n    t0 = time.time()\n    try:\n        proc = subprocess.Popen(cmd, stdout=subprocess.PIPE, stderr=subprocess.PIPE)\n    except OSError as e:\n        print(BUILD_EXEC_FAIL_MSG % (cmd, e))\n        sys.exit(1)\n    finally:\n        os.chdir('..')\n\n    result = proc.wait()\n    t1 = time.time()\n\n    if result != 0:\n        indented_msg = \"\"\n        outmsg = proc.stdout.read().decode('ascii', errors='ignore')\n        outmsg = \"\\n\".join(\"    \" + x for x in outmsg.split(\"\\n\"))\n        errmsg = proc.stderr.read().decode('ascii', errors='ignore')\n        errmsg = \"\\n\".join(\"    \" + x for x in errmsg.split(\"\\n\"))\n        print(BUILD_FAIL_MSG % (red(outmsg), red(errmsg)))\n        sys.exit(1)\n\n    indented_msg = \"\"\n    msg = proc.stdout.read().decode('ascii', errors='ignore')\n    pat = re.compile(r\"(\\[.*\\]) (.*)\", re.DOTALL)\n    for line in msg.strip().split(\"\\n\"):\n        m = pat.match(line)\n        if not m: continue # skip generate.py output lines\n        stamp, txt = m.groups()\n        indented_msg += \"   \" + dim(green(stamp)) + \" \" + dim(txt) + \"\\n\"\n    print(BUILD_SUCCESS_MSG % indented_msg)\n    print(\"Build time: %s\" % bright(yellow(\"%0.1f seconds\" % (t1-t0))))\n    print()\n    print(\"Build artifact sizes:\")\n    try:\n        def size(*path):\n            return os.stat(join(\"bokehjs\", \"build\", *path)).st_size / 2**10\n\n        print(\"  - bokeh.js              : %6.1f KB\" % size(\"js\", \"bokeh.js\"))\n        print(\"  - bokeh.min.js          : %6.1f KB\" % size(\"js\", \"bokeh.min.js\"))\n\n        print(\"  - bokeh-widgets.js      : %6.1f KB\" % size(\"js\", \"bokeh-widgets.js\"))\n        print(\"  - bokeh-widgets.min.js  : %6.1f KB\" % size(\"js\", \"bokeh-widgets.min.js\"))\n\n        print(\"  - bokeh-tables.js       : %6.1f KB\" % size(\"js\", \"bokeh-tables.js\"))\n        print(\"  - bokeh-tables.min.js   : %6.1f KB\" % size(\"js\", \"bokeh-tables.min.js\"))\n\n        print(\"  - bokeh-api.js          : %6.1f KB\" % size(\"js\", \"bokeh-api.js\"))\n        print(\"  - bokeh-api.min.js      : %6.1f KB\" % size(\"js\", \"bokeh-api.min.js\"))\n\n        print(\"  - bokeh-gl.js           : %6.1f KB\" % size(\"js\", \"bokeh-gl.js\"))\n        print(\"  - bokeh-gl.min.js       : %6.1f KB\" % size(\"js\", \"bokeh-gl.min.js\"))\n\n        print(\"  - bokeh-mathjax.js      : %6.1f KB\" % size(\"js\", \"bokeh-mathjax.js\"))\n        print(\"  - bokeh-mathjax.min.js  : %6.1f KB\" % size(\"js\", \"bokeh-mathjax.min.js\"))\n    except Exception as e:\n        print(BUILD_SIZE_FAIL_MSG % e)\n        sys.exit(1)\n\ndef install_js():\n    ''' Copy built BokehJS files into the Python source tree.\n\n    Returns:\n        None\n\n    '''\n    ROOT = dirname(realpath(__file__))\n    BOKEHJSROOT = join(ROOT, 'bokehjs')\n    BOKEHJSBUILD = join(BOKEHJSROOT, 'build')\n    JS = join(BOKEHJSBUILD, 'js')\n    SERVER = join(ROOT, 'bokeh/server')\n    TSLIB = join(BOKEHJSROOT , 'node_modules/typescript/lib')\n\n    target_jsdir = join(SERVER, 'static', 'js')\n    target_tslibdir = join(SERVER, 'static', 'lib')\n\n    STATIC_ASSETS = [\n        join(JS,  'bokeh.js'),\n        join(JS,  'bokeh.min.js'),\n    ]\n    if not all(exists(a) for a in STATIC_ASSETS):\n        print(BOKEHJS_INSTALL_FAIL)\n        sys.exit(1)\n\n    if exists(target_jsdir):\n        shutil.rmtree(target_jsdir)\n    shutil.copytree(JS, target_jsdir)\n\n    if exists(target_tslibdir):\n        shutil.rmtree(target_tslibdir)\n    if exists(TSLIB):\n        os.mkdir(target_tslibdir)\n        for lib_file in glob(join(TSLIB, \"lib.*.d.ts\")):\n            shutil.copy(lib_file, target_tslibdir)\n\n# -----------------------------------------------------------------------------\n# Status and error message strings\n# -----------------------------------------------------------------------------\n\nBOKEHJS_BUILD_PROMPT = \"\"\"\nBokeh includes a JavaScript library (BokehJS) that has its own\nbuild process. How would you like to handle BokehJS:\n\n1) build and install fresh BokehJS\n2) install last built BokehJS from bokeh/bokehjs/build\n\"\"\"\n\nBOKEHJS_INSTALL_FAIL = \"\"\"\nERROR: Cannot install BokehJS: files missing in `./bokehjs/build`.\n\n\nPlease build BokehJS by running setup.py with the `--build-js` option.\n  Contributor Guide: https://docs.bokeh.org/en/latest/docs/dev_guide/setup.html.\n\"\"\"\n\nBUILD_EXEC_FAIL_MSG = bright(red(\"Failed.\")) + \"\"\"\n\nERROR: subprocess.Popen(%r) failed to execute:\n\n    %s\n\nHave you run `npm ci` from the bokehjs subdirectory?\nFor more information, see the Contributor Guide:\n\n    https://docs.bokeh.org/en/latest/docs/dev_guide.html\n\"\"\"\n\nBUILD_FAIL_MSG = bright(red(\"Failed.\")) + \"\"\"\n\nERROR: 'node make build' returned the following\n\n---- on stdout:\n%s\n\n---- on stderr:\n%s\n\"\"\"\n\nBUILD_SIZE_FAIL_MSG = \"\"\"\nERROR: could not determine sizes:\n\n    %s\n\"\"\"\n\nBUILD_SUCCESS_MSG = bright(green(\"Success!\")) + \"\"\"\n\nBuild output:\n\n%s\"\"\"\n\nSDIST_BUILD_WARNING = \"\"\"\nSource distribution (sdist) packages come with PRE-BUILT BokehJS files.\n\nBuilding/installing from the bokehjs source directory of sdist packages is\ndisabled, and the options --build-js and --install-js will be IGNORED.\n\nTo build or develop BokehJS yourself, you must clone the full Bokeh GitHub\nrepository from https://github.com/bokeh/bokeh\n\"\"\"\n"
    },
    {
      "filename": "bokeh/server/views/app_index.html",
      "content": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n\n  <!-- Basic Page Needs\n  –––––––––––––––––––––––––––––––––––––––––––––––––– -->\n  <meta charset=\"utf-8\">\n  <title>Running Bokeh Applications</title>\n\n  <!-- Mobile Specific Metas\n  –––––––––––––––––––––––––––––––––––––––––––––––––– -->\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n\n  <!-- FONT\n  –––––––––––––––––––––––––––––––––––––––––––––––––– -->\n  <link href=\"https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600&Lato|Work+Sans:400,700&display=swap\" rel=\"stylesheet\" type='text/css'>\n\n\n  <!-- CSS\n  –––––––––––––––––––––––––––––––––––––––––––––––––– -->\n  <link rel=\"stylesheet\" href=\"https://static.bokeh.org/vendor/css/bootstrap.min.css\" />\n  <link rel=\"stylesheet\" href=\"https://bokeh.org//css/main.css\" />\n\n  <!-- Favicon\n  –––––––––––––––––––––––––––––––––––––––––––––––––– -->\n  <link rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"https://static.bokeh.org/favicon/apple-touch-icon.png\">\n  <link rel=\"icon\" type=\"image/png\" sizes=\"32x32\" href=\"https://static.bokeh.org/favicon/favicon-32x32.png\">\n  <link rel=\"icon\" type=\"image/png\" sizes=\"16x16\" href=\"https://static.bokeh.org/favicon/favicon-16x16.png\">\n  <link rel=\"manifest\" href=\"https://static.bokeh.org/favicon/site.webmanifest\">\n  <link rel=\"mask-icon\" href=\"https://static.bokeh.org/favicon/safari-pinned-tab.svg\" color=\"#5bbad5\">\n  <meta name=\"msapplication-TileColor\" content=\"#da532c\">\n  <meta name=\"theme-color\" content=\"#ffffff\">\n\n</head>\n<body>\n\n  <!-- main menu -->\n  <div class=\"container py-3 py-lg-0\">\n    <nav class=\"navbar navbar-expand-lg navbar-light bg-light\" id=\"main-menu\">\n\n      <a class=\"navbar-brand\" href=\"//bokeh.org\" id=\"logo\">\n        <img src=\"https://static.bokeh.org/logos/logotype.svg\" height=\"30\" width=\"110\" />\n      </a>\n\n      <button class=\"navbar-toggler ml-auto hidden-sm-up float-xs-left\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarContent\" aria-controls=\"navbarContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n        <span class=\"navbar-toggler-icon\"></span>\n      </button>\n\n      <div class=\"collapse navbar-collapse\" id=\"navbarContent\">\n        <ul class=\"navbar-nav mr-auto\">\n\n          <li class=\"nav-item flex-md-fill text-md-center\">\n            <a class=\"nav-link\" href=\"//docs.bokeh.org/en/latest\">Documentation</a>\n          </li>\n\n          <li class=\"nav-item flex-md-fill text-md-center\">\n            <a class=\"nav-link\" href=\"//discourse.bokeh.org\">Community</a>\n          </li>\n\n          <li class=\"nav-item flex-md-fill text-md-center\">\n            <a class=\"nav-link\" href=\"//mybinder.org/v2/gh/bokeh/bokeh-notebooks/master?filepath=tutorial%2F00%20-%20Introduction%20and%20Setup.ipynb\">Tutorials</a>\n          </li>\n\n          <li class=\"nav-item flex-md-fill text-md-center\">\n            <a class=\"nav-link\" href=\"//demo.bokeh.org\">Demos</a>\n          </li>\n\n          <li class=\"nav-item flex-md-fill text-md-center\">\n            <a class=\"nav-link\" href=\"//medium.com/bokeh\">Blog</a>\n          </li>\n\n          <li class=\"nav-item flex-md-fill text-md-center\">\n              <a class=\"nav-link\" href=\"//github.com/bokeh/bokeh\">GitHub</a>\n          </li>\n\n        </ul>\n      </div>\n\n    </nav>\n  </div>\n  <!-- end main menu -->\n\n  <!-- applications -->\n  <div class=\"container py-3 py-lg-0\" style=\"min-height: 250px\">\n    <br />\n    <h2>Active Bokeh Applications</h2>\n\n      <p>The following applications are currently running on this server:</p>\n      <div class=\"list-group list-group-flush\">\n        {% for item in items %}\n        <h4><a href=\"{{ prefix }}{{ item }}\">{{ item[1:] }}</a></h4>\n        {% end %}\n      </div>\n      <br />\n  </div>\n  <!-- end applications -->\n\n  <!-- footer -->\n  <footer class=\"container-fluid links\">\n\n    <div class=\"container\">\n      <div class=\"row\">\n        <div class=\"col-lg-3 col-md-6 col-sm-4 links-item\">\n          <h6>Project</h6>\n          <ul class=\"nav flex-column\">\n            <li class=\"nav-item\">\n              <a class=\"nav-link\" href=\"https://bokeh.org/roadmap/\">Roadmap</a>\n            </li>\n            <li class=\"nav-item\">\n              <a class=\"nav-link\" href=\"https://bokeh.org/team/\">Team</a>\n            </li>\n            <li class=\"nav-item\">\n              <a class=\"nav-link\" href=\"https://bokeh.org/branding/\">Branding</a>\n            </li>\n          </ul>\n        </div>\n        <div class=\"col-lg-3 col-md-6 col-sm-4 links-item\">\n          <h6>Documentation</h6>\n          <ul class=\"nav flex-column\">\n            <li class=\"nav-item\">\n              <a class=\"nav-link\" href=\"https://docs.bokeh.org/en/latest/docs/user_guide.html\">User Guide</a>\n            </li>\n            <li class=\"nav-item\">\n              <a class=\"nav-link\" href=\"https://docs.bokeh.org/en/latest/docs/gallery.html\">Gallery</a>\n            </li>\n            <li class=\"nav-item\">\n              <a class=\"nav-link\" href=\"https://docs.bokeh.org/en/latest/docs/reference.html\">Reference Guide</a>\n            </li>\n          </ul>\n        </div>\n        <div class=\"col-lg-3 col-md-6 col-sm-4 links-item\">\n          <h6>Hands On</h6>\n          <ul class=\"nav flex-column\">\n            <li class=\"nav-item\">\n              <a class=\"nav-link\" href=\"https://mybinder.org/v2/gh/bokeh/bokeh-notebooks/master?filepath=tutorial%2F00%20-%20Introduction%20and%20Setup.ipynb\">Tutorials</a>\n            </li>\n            <li class=\"nav-item\">\n              <a class=\"nav-link\" href=\"https://demo.bokeh.org\">Demos</a>\n            </li>\n          </ul>\n        </div>\n        <div class=\"col-lg-3 col-md-6 col-sm-3 links-item\">\n          <h6>Contribute</h6>\n          <ul class=\"nav flex-column\">\n            <li class=\"nav-item\">\n              <a class=\"nav-link\" href=\"https://github.com/bokeh/bokeh\">GitHub</a>\n            </li>\n            <li class=\"nav-item\">\n              <a class=\"nav-link\" href=\"https://docs.bokeh.org/en/latest/docs/dev_guide.html\">Contributor Guide</a>\n            </li>\n            <li class=\"nav-item\">\n              <a class=\"nav-link\" href=\"https://bokeh.org/sponsor/\">Sponsor</a>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n    <br />\n  </footer>\n  <!-- end footer -->\n\n  <script src=\"https://static.bokeh.org/vendor/js/jquery.min.js\"></script>\n  <script src=\"https://static.bokeh.org/vendor/js/bootstrap.min.js\"></script>\n\n</body>\n</html>\n"
    },
    {
      "filename": "sphinx/source/_static/custom.css",
      "content": "* {\n    font-variant-ligatures: none;\n}\n\n.version-alert a {\n    text-decoration: underline;\n    color: #ddd;\n}\n\n#banner .version-alert {\n    background-color: #CF462A;\n    padding: 1em;\n    color: #fff;\n    font-family: \"Work Sans\", sans-serif;\n    font-weight: 600; font-size: 16px;\n}\n\n.version-alert a {\n    text-decoration: underline;\n    color: #ddd;\n}\n\n#banner .news-alert {\n    background-color: #ECD078;\n    padding: 1em;\n    font-family: \"Work Sans\", sans-serif;\n    font-weight: 600; font-size: 16px;\n}\n\n.news-alert a {\n    text-decoration: underline;\n    color: #444;\n}\n\n.btn { font-family: \"Lato\", sans-serif; }\n\n.btn-primary { filter: brightness(90%); background-color: #C02942; border-color: #C02942; }\n.btn-primary:hover { filter: brightness(100%); background-color: #C02942; border-color: #C02942; }\n\nul.gallery li {\n    list-style-type: none;\n    float:left\n}\n\nimg.gallery {\n    width: 200px;\n    height:200px\n}\n\na { color: #CF462A; }\n\ncode {\n    font-family: SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;\n    color: rgb(33, 37, 41);\n    padding: 2px 1px 0px 1px;\n    font-size: 80%;\n    background-color:#eef0f1;\n}\n\n/* customize highlight color for sphinx code blocks */\n.highlight .hll {\n    background-color: rgba(246,169,27,0.3);\n}\n\n/* Customize theme font colors */\n:root {\n    --pst-color-borders: 206, 212, 218;\n\n    --pst-color-primary: 33, 37, 41;\n    --pst-color-success: 165, 205, 57;\n    --pst-color-info: 0, 170, 174;\n    --pst-color-warning: 240, 82, 35;\n    --pst-color-danger: 220, 53, 69;\n    --pst-color-text-base: var(--pst-color-primary);\n\n    --pst-color-h1: var(--pst-color-primary);\n    --pst-color-h2: var(--pst-color-primary);\n    --pst-color-h3: var(--pst-color-text-base);\n    --pst-color-h4: var(--pst-color-text-base);\n    --pst-color-h5: var(--pst-color-text-base);\n    --pst-color-h6: var(--pst-color-text-base);\n    --pst-color-paragraph: var(--pst-color-text-base);\n    --pst-color-link: 255, 0, 0;\n    --pst-color-link-hover: 227, 46, 0;\n    --pst-color-headerlink: 198, 15, 15;\n    --pst-color-headerlink-hover: 255, 255, 255;\n\n    --pst-color-active-navigation: var(--pst-color-primary);\n    --pst-color-navbar-link: 77, 77, 77;\n    --pst-color-navbar-link-hover: var(--pst-color-active-navigation);\n    --pst-color-navbar-link-active: var(--pst-color-active-navigation);\n    --pst-color-sidebar-link: 77, 77, 77;\n    --pst-color-sidebar-link-hover: var(--pst-color-active-navigation);\n    --pst-color-sidebar-link-active: var(--pst-color-active-navigation);\n    --pst-color-sidebar-caption: 77, 77, 77;\n    --pst-color-toc-link: 119, 117, 122;\n    --pst-color-toc-link-hover: var(--pst-color-active-navigation);\n    --pst-color-toc-link-active: var(--pst-color-active-navigation);\n\n    --pst-color-admonition-default: var(--pst-color-info);\n    --pst-color-admonition-note: var(--pst-color-info);\n    --pst-color-admonition-attention: var(--pst-color-warning);\n    --pst-color-admonition-caution: var(--pst-color-warning);\n    --pst-color-admonition-warning: var(--pst-color-warning);\n    --pst-color-admonition-danger: var(--pst-color-danger);\n    --pst-color-admonition-error: var(--pst-color-danger);\n    --pst-color-admonition-hint: var(--pst-color-success);\n    --pst-color-admonition-tip: var(--pst-color-success);\n    --pst-color-admonition-important: var(--pst-color-success);\n\n    --pst-icon-admonition-default: var(--pst-icon-info-circle);\n    --pst-icon-admonition-note: var(--pst-icon-info-circle);\n    --pst-icon-admonition-attention: var(--pst-icon-exclamation-circle);\n    --pst-icon-admonition-caution: var(--pst-icon-exclamation-triangle);\n    --pst-icon-admonition-warning: var(--pst-icon-exclamation-triangle);\n    --pst-icon-admonition-danger: var(--pst-icon-exclamation-triangle);\n    --pst-icon-admonition-error: var(--pst-icon-times-circle);\n    --pst-icon-admonition-hint: var(--pst-icon-lightbulb);\n    --pst-icon-admonition-tip: var(--pst-icon-lightbulb);\n    --pst-icon-admonition-important: var(--pst-icon-exclamation-circle);\n}\n\n/* Customize search box */\n#search-input {\n    border: 1px solid rgba(var(--pst-color-borders),1);\n    border-radius: 1.5px;\n}\n\n/* Custom styles for documentation landing page (index.rst) and other pages\nusing sphinx_panels */\n\n.bokeh-examples {\n    padding: 0px;\n}\n\n.bokeh-examples img {\n    width: 100%;\n    height: 100%;\n}\n\n.bg-bokeh-one {\n    background-color: rgba(246,169,27,0.3);\n}\n\n.bg-bokeh-two {\n    background-color: rgba(165,205,57,0.3);\n}\n\n.bg-bokeh-three {\n    background-color: rgba(0,170,174,0.3);\n}\n\n.bg-bokeh-four {\n    background-color: rgba(240,82,35,0.3);\n}\n\n.bg-bokeh-five {\n    background-color: rgba(138,40,137,0.3);\n}\n\n.bg-bokeh-six {\n    background-color: rgba(32,178,84,0.3);\n}\n\n.bg-bokeh-seven {\n    background-color: rgba(236,21,87,0.3);\n}\n\n.card-header p {\n    font-weight: 600;\n    font-size: 125%;\n}\n\n.card-text a {\n    font-weight: 600;\n}\n\n@media (max-width: 575px) {\n    .examples-container .d-flex {\n        width: 25%;\n    }\n}\n\n/* style links */\n.links {\n    background-color: #542437;\n    color: #fff;\n}\n\n.links h6 {\n    font-weight: 700;\n    font-size: 14px;\n    color: #fff;\n}\n\n.links ul.nav li a {\n    padding: 3px 0;\n    font-family: \"Lato\", sans-serif;\n    font-size: 13px;\n    color: #fff;\n}\n\n.links-item { margin-top: 30px; }\n\n/* style footer */\n.page-footer h6 {\n    color: #fff;\n    font-weight: bold;\n    margin: 8px 0px;\n}\n\n.links {\n    background-color: #542437;\n    font-size: 0.9rem;\n}\n\n.links a {padding: 3px 0px;}\n\n.links-item {\n    margin: 0px;\n    padding: 20px 15px;\n}\n\n.copyright {\n    background-color: #242729;\n    font-size: 0.85rem;\n    padding: 10px !important;\n}\n\n.copyright p {color: #eee;}\n\n/* Settings for sphinx-tabs */\n.sphinx-tabs {\n    padding: 0px;\n}\n\n.sphinx-tabs [role=\"tablist\"] {\n    border-bottom: 1px solid rgba(var(--pst-color-borders),1);\n}\n\n.sphinx-tabs-tab {\n    padding: 0.5rem 1rem;\n    color: rgba(var(--pst-color-h4),1);;\n}\n\n.sphinx-tabs-tab[aria-selected=\"true\"] {\n    border: 1px solid rgba(var(--pst-color-borders),1);\n    border-bottom: 1px solid white;\n}\n\n.sphinx-tabs-panel {\n    border-bottom: 1px solid rgba(var(--pst-color-borders),1);\n    border-right: 1px solid rgba(var(--pst-color-borders),1);\n    border-left: 1px solid rgba(var(--pst-color-borders),1);\n}\n\n/* optional border for images (e.g. screenshots) */\n\nimg.image-border {\n    border: 1px solid rgba(var(--pst-color-borders),1);\n}\n\n/* Pandas dataframe css */\n /* Taken from: https://github.com/spatialaudio/nbsphinx/blob/fb3ba670fc1ba5f54d4c487573dbc1b4ecf7e9ff/src/nbsphinx.py#L587-L619 */\n\n .dataframe {\n    max-width: 100%;\n    display: block;\n    overflow-x: auto;\n    white-space: nowrap;\n  }\n\n table.dataframe {\n   border: none !important;\n   border-collapse: collapse;\n   border-spacing: 0;\n   border-color: transparent;\n   color: black;\n   font-size: 12px;\n   table-layout: fixed;\n }\n table.dataframe thead {\n   border-bottom: 1px solid black;\n   vertical-align: bottom;\n }\n table.dataframe tr,\n table.dataframe th,\n table.dataframe td {\n   text-align: right;\n   vertical-align: middle;\n   padding: 0.5em 0.5em;\n   line-height: normal;\n   white-space: normal;\n   max-width: none;\n   border: none;\n }\n table.dataframe th {\n   font-weight: bold;\n }\n table.dataframe tbody tr:nth-child(odd) {\n   background: #f5f5f5;\n }\n table.dataframe tbody tr:hover {\n   background: rgba(66, 165, 245, 0.2);\n }\n\n .autoclasstoc td {\n     padding: 0.15rem;\n     line-height: normal;\n }\n\n.bk-collapsible {\n  background-color: #eee;\n  color: #444;\n  cursor: pointer;\n  padding: 18px;\n  width: 100%;\n  border: none;\n  text-align: left;\n  outline: none;\n  font-size: 15px;\n}\n\n/* Add a background color to the button if it is clicked on (add the .active class with JS), and when you move the mouse over it (hover) */\n.active.bk-collapsible:hover {\n  background-color: #ccc;\n}\n\n/* Style the collapsible content. Note: hidden by default */\n.bk-collapsible-content {\n  padding: 0 18px;\n  display: none;\n  overflow: hidden;\n  background-color: #f1f1f1;\n}\n"
    },
    {
      "filename": "sphinx/source/_templates/footer.html",
      "content": "<footer class=\"page-footer p-0\">\n\n  <div class=\"container-fluid p-0 links\">\n    <div class=\"container\">\n      <div class=\"row\">\n        <div class=\"col-lg-3 col-md-6 col-sm-4 links-item\">\n          <h6>Project</h6>\n          <ul class=\"nav flex-column\">\n            <li class=\"nav-item\">\n              <a class=\"nav-link\" href=\"https://bokeh.org/roadmap/\">Roadmap</a>\n            </li>\n            <li class=\"nav-item\">\n              <a class=\"nav-link\" href=\"https://bokeh.org/team/\">Team</a>\n            </li>\n            <li class=\"nav-item\">\n              <a class=\"nav-link\" href=\"https://bokeh.org/branding/\">Branding</a>\n            </li>\n          </ul>\n        </div>\n\n        <div class=\"col-lg-3 col-md-6 col-sm-4 links-item\">\n          <h6>Documentation</h6>\n          <ul class=\"nav flex-column\">\n            <li class=\"nav-item\">\n              <a class=\"nav-link\" href=\"https://docs.bokeh.org/en/latest/docs/user_guide.html\">User Guide</a>\n            </li>\n            <li class=\"nav-item\">\n              <a class=\"nav-link\" href=\"https://docs.bokeh.org/en/latest/docs/gallery.html\">Gallery</a>\n            </li>\n            <li class=\"nav-item\">\n              <a class=\"nav-link\" href=\"https://docs.bokeh.org/en/latest/docs/reference.html\">Reference Guide</a>\n            </li>\n          </ul>\n        </div>\n\n        <div class=\"col-lg-3 col-md-6 col-sm-4 links-item\">\n          <h6>Hands On</h6>\n          <ul class=\"nav flex-column\">\n            <li class=\"nav-item\">\n              <a class=\"nav-link\" href=\"https://mybinder.org/v2/gh/bokeh/bokeh-notebooks/master?filepath=tutorial%2F00%20-%20Introduction%20and%20Setup.ipynb\">Tutorials</a>\n            </li>\n            <li class=\"nav-item\">\n              <a class=\"nav-link\" href=\"https://demo.bokeh.org\">Demos</a>\n            </li>\n            <li class=\"nav-item\">\n              <a class=\"nav-link\" href=\"https://bokeh.org/community/\">Support</a>\n            </li>\n          </ul>\n        </div>\n\n        <div class=\"col-lg-3 col-md-6 col-sm-4 links-item\">\n          <h6>Contribute</h6>\n          <ul class=\"nav flex-column\">\n            <li class=\"nav-item\">\n              <a class=\"nav-link\" href=\"https://github.com/bokeh/bokeh\">GitHub</a>\n            </li>\n            <li class=\"nav-item\">\n              <a class=\"nav-link\" href=\"https://docs.bokeh.org/en/latest/docs/dev_guide.html\">Contributor Guide</a>\n            </li>\n            <li class=\"nav-item\">\n              <a class=\"nav-link\" href=\"https://bokeh.org/sponsor/\">Sponsor</a>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </div>\n\n\n  <div class=\"container-fluid p-0 copyright\">\n    <div class=\"container py-2\">\n      <div class=\"row\">\n        <div class=\"col-md-10\">\n          <p class=\"m-0\">\n            Bokeh is a fiscally sponsored project of\n            <a href=\"https://numfocus.org\">NumFOCUS</a>, a nonprofit dedicated\n            to supporting the open-source scientific computing community.\n            Donations help pay for cloud hosting costs, travel, and other\n            project needs.\n          </p>\n          <p class=\"m-0\">\n            {{ copyright }} The website content uses the <a href=\"https://github.com/bokeh/demo.bokeh.org/blob/master/LICENSE.txt\">BSD License</a> and is covered by the <a href=\"https://github.com/bokeh/bokeh/blob/master/CODE_OF_CONDUCT.md\">Bokeh Code of Conduct</a>.\n          </p>\n        </div>\n        <div class=\"col-md-2\">\n          <a class=\"btn btn-primary\" href=\"https://numfocus.org/donate-to-bokeh\">Donate</a>\n        </div>\n      </div>\n    </div>\n  </div>\n\n</footer>\n"
    },
    {
      "filename": "sphinx/source/conf.py",
      "content": "# -----------------------------------------------------------------------------\n# Copyright (c) 2012 - 2021, Anaconda, Inc., and Bokeh Contributors.\n# All rights reserved.\n#\n# The full license is in the file LICENSE.txt, distributed with this software.\n# -----------------------------------------------------------------------------\n\n# Standard library imports\nimport os\nfrom datetime import date\n\n# Bokeh imports\nfrom bokeh import __version__\nfrom bokeh.settings import settings\n\n# -- Project configuration -----------------------------------------------------\n\nauthor = \"Bokeh Contributors\"\nyear = date.today().year\n\ncopyright = f\"©{year} {author}.\"\n\nproject = 'Bokeh'\n\nversion = settings.docs_version() or __version__\n\n# -- Sphinx configuration -----------------------------------------------------\n\nadd_module_names = False\n\nexclude_patterns = ['docs/releases/*']\n\nextensions = [\n    'autoclasstoc',\n    'sphinxext.opengraph',\n    'sphinx_panels',\n#    'sphinx_reredirects',\n    'sphinx_tabs.tabs',\n    'sphinx.ext.autodoc',\n    'sphinx.ext.autosummary',\n    'sphinx.ext.ifconfig',\n    'sphinx.ext.napoleon',\n    'sphinx.ext.intersphinx',\n    'sphinx.ext.viewcode',\n    'bokeh.sphinxext.bokeh_autodoc',\n    'bokeh.sphinxext.bokeh_dataframe',\n    'bokeh.sphinxext.bokeh_color',\n    'bokeh.sphinxext.bokeh_enum',\n    'bokeh.sphinxext.bokeh_example_metadata',\n    'bokeh.sphinxext.bokeh_gallery',\n    'bokeh.sphinxext.bokeh_jinja',\n    'bokeh.sphinxext.bokeh_model',\n    'bokeh.sphinxext.bokeh_options',\n    'bokeh.sphinxext.bokeh_palette',\n    'bokeh.sphinxext.bokeh_palette_group',\n    'bokeh.sphinxext.bokeh_plot',\n    'bokeh.sphinxext.bokeh_prop',\n    'bokeh.sphinxext.bokeh_releases',\n    'bokeh.sphinxext.bokeh_roles',\n    'bokeh.sphinxext.bokeh_settings',\n    'bokeh.sphinxext.bokeh_sitemap',\n    'bokeh.sphinxext.bokehjs_content',\n    'bokeh.sphinxext.collapsible_code_block',\n]\n\nneeds_sphinx = '4.1'\n\nrst_epilog = open(\"rst_epilog.txt\").read()\n\n# -- Extensions configuration --------------------------------------------------\n\nautoclasstoc_sections = [\n        'public-attrs',\n        'public-methods',\n]\n\nautodoc_member_order = 'groupwise'\n\nbokeh_missing_google_api_key_ok = False\n\nif not bokeh_missing_google_api_key_ok:\n    if \"GOOGLE_API_KEY\" not in os.environ:\n        raise RuntimeError(\"\\n\\nThe GOOGLE_API_KEY environment variable is not set. Set GOOGLE_API_KEY to a valid API key, \"\n                           \"or set bokeh_missing_google_api_key_ok=True in conf.py to build anyway (with broken GMaps)\")\n\nbokeh_plot_pyfile_include_dirs = ['docs']\n\nintersphinx_mapping = {\n    'numpy'       : ('https://numpy.org/doc/stable/', None),\n    'pandas'      : ('https://pandas.pydata.org/pandas-docs/stable/', None),\n    'python'      : ('https://docs.python.org/3/', None),\n    'sphinx'      : ('https://www.sphinx-doc.org/en/master/', None),\n    'xyzservices' : ('https://xyzservices.readthedocs.io/en/stable/', None),\n}\n\nnapoleon_include_init_with_doc = True\n\nogp_site_url = 'https://docs.bokeh.org/en/latest/'\nogp_image = 'http://static.bokeh.org/og/logotype-on-hex.png'\nogp_custom_meta_tags = [\n    '<meta name=\"twitter:card\" content=\"summary_large_image\" />',\n    '<meta property=\"twitter:site\" content=\"@bokeh\" />',\n    '<meta name=\"image\" property=\"og:image\" content=\"http://static.bokeh.org/og/logotype-on-hex.png\">',\n]\n\npanels_add_bootstrap_css = False\n\nsphinx_tabs_disable_tab_closing = True\n\npygments_style = 'sphinx'\n\nredirects = {\n    \"docs/installation\": \"first_steps/installation.html\",\n    \"docs/user_guide/quickstart\": \"../first_steps.html\",\n}\n\n# -- Options for HTML output ---------------------------------------------------\n\nhtml_context = {\n    'AUTHOR': author,\n    'DESCRIPTION': 'Bokeh visualization library, documentation site.',\n    'SITEMAP_BASE_URL': 'https://docs.bokeh.org/en/', # Trailing slash is needed\n    'VERSION': version,\n}\n\nhtml_css_files = ['custom.css']\n\nhtml_static_path = ['_static']\n\nhtml_theme ='pydata_sphinx_theme'\n\nhtml_theme_options = {\n    'external_links': [\n        {'name': 'Tutorial',  'url': 'https://mybinder.org/v2/gh/bokeh/bokeh-notebooks/master?filepath=tutorial%2F00%20-%20Introduction%20and%20Setup.ipynb'},\n        {'name': 'Community', 'url': 'https://discourse.bokeh.org'}\n    ],\n    'github_url': 'https://github.com/bokeh/bokeh',\n    'google_analytics_id': 'UA-27761864-7',\n    \"navbar_align\": \"left\",\n    'show_toc_level': 2,\n    'twitter_url': 'https://twitter.com/bokeh',\n}\n\nhtml_sidebars = {\n  \"docs/gallery\": [],\n  \"docs/gallery/**\": [],\n  \"index\": [],\n}\n\nhtml_title = f\"{project} {version} Documentation\"\n\ntemplates_path = ['_templates']\n\ndef setup(app):\n    app.add_object_type('confval', 'confval', objname='configuration value', indextemplate='pair: %s; configuration value')\n"
    }
  ]
}